# [0080. http æ¨¡å—æ¦‚è¿°](https://github.com/Tdahuyou/TNotes.nodejs/tree/main/notes/0080.%20http%20%E6%A8%A1%E5%9D%97%E6%A6%82%E8%BF%B0)

<!-- region:toc -->

- [1. ğŸ“’ æ¦‚è¿°](#1--æ¦‚è¿°)
- [2. ğŸ“’ `server` å¯¹è±¡](#2--server-å¯¹è±¡)
- [3. ğŸ“’ `response` å¯¹è±¡](#3--response-å¯¹è±¡)
- [4. ğŸ“’ `request` å¯¹è±¡](#4--request-å¯¹è±¡)
- [5. ğŸ’» demos.1 - ä½¿ç”¨ `server` å¯¹è±¡åˆ›å»ºä¸€ä¸ªæœåŠ¡](#5--demos1---ä½¿ç”¨-server-å¯¹è±¡åˆ›å»ºä¸€ä¸ªæœåŠ¡)

<!-- endregion:toc -->

## 1. ğŸ“’ æ¦‚è¿°

- http æ¨¡å—ä¸­ä¸»è¦æœ‰ `server` å¯¹è±¡ã€`response` å¯¹è±¡å’Œ `request` å¯¹è±¡ï¼Œä¹Ÿæ˜¯æœ¬èŠ‚ç¬”è®°ä¸»è¦ä»‹ç»çš„å†…å®¹ã€‚

## 2. ğŸ“’ `server` å¯¹è±¡

- `server` å¯¹è±¡ç”¨æ¥åˆ›å»ºä¸€ä¸ªæœåŠ¡ã€‚
- åœ¨ Node.js ä¸­ï¼Œä½¿ç”¨ `http` æ¨¡å—ä¸­çš„ `createServer()` æ–¹æ³•ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª `server` å¯¹è±¡
  - `const server = require('http').createServer()`
- `server` å¯¹è±¡ä¸­ä¸»è¦ä½¿ç”¨çš„æ–¹æ³•æœ‰ `listen()` æ–¹æ³•å’Œ `close()` æ–¹æ³•ï¼Œå®ƒä»¬åˆ†åˆ«æ§åˆ¶ç€æœåŠ¡å™¨çš„å¯åŠ¨å’Œç»“æŸã€‚
  - `server.listen(port)` å¯åŠ¨æœåŠ¡å™¨ï¼Œå¹¶ç›‘å¬æŒ‡å®šç«¯å£ã€‚
    - ç«¯å£ `port` æ˜¯è®¡ç®—æœºä¸è®¡ç®—æœºä¹‹é—´ä¿¡æ¯çš„é€šé“ã€‚
    - è®¡ç®—æœºä¸­çš„ç«¯å£ä» `0` å¼€å§‹ï¼Œä¸€å…±æœ‰ `65535` ä¸ªç«¯å£ã€‚
  - `server.close()` å…³é—­æœåŠ¡å™¨ã€‚

## 3. ğŸ“’ `response` å¯¹è±¡

- `response` å¯¹è±¡ç”¨äºå‘å®¢æˆ·ç«¯å‘é€å“åº”ã€‚
- ä¸»è¦æ–¹æ³•ï¼š
  - `writeHead(statusCode, headers)`ï¼šè®¾ç½®å“åº”å¤´ã€‚
    - `statusCode`ï¼šHTTP çŠ¶æ€ç ã€‚
    - `headers`ï¼šå“åº”å¤´å¯¹è±¡ã€‚
  - `end([data], [encoding])`ï¼šç»“æŸå“åº”å¹¶å‘é€æ•°æ®åˆ°å®¢æˆ·ç«¯ã€‚
    - `data`ï¼šå¯é€‰å‚æ•°ï¼Œè¦å‘é€çš„æ•°æ®ã€‚
    - `encoding`ï¼šå¯é€‰å‚æ•°ï¼Œæ•°æ®ç¼–ç æ ¼å¼ã€‚

## 4. ğŸ“’ `request` å¯¹è±¡

- `request` å¯¹è±¡ç”¨äºå¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ã€‚
- ä¸»è¦å±æ€§ï¼š
  - `method`ï¼šè¯·æ±‚æ–¹æ³•ï¼ˆå¦‚ `GET`, `POST` ç­‰ï¼‰ã€‚
  - `url`ï¼šè¯·æ±‚çš„ URLã€‚
  - `headers`ï¼šè¯·æ±‚å¤´å¯¹è±¡ã€‚
- ä¸»è¦æ–¹æ³•ï¼š
  - `on(event, listener)`ï¼šç›‘å¬è¯·æ±‚äº‹ä»¶ã€‚
    - `event`ï¼šäº‹ä»¶åç§°ã€‚
    - `listener`ï¼šäº‹ä»¶å¤„ç†å‡½æ•°ã€‚

## 5. ğŸ’» demos.1 - ä½¿ç”¨ `server` å¯¹è±¡åˆ›å»ºä¸€ä¸ªæœåŠ¡

::: code-group

<<< ./demos/1/1.cjs {js}

:::

- åœ¨æœåŠ¡å¯åŠ¨æœŸé—´è®¿é—®ï¼š`http://127.0.0.1:23523`
  - ![å›¾ 0](https://cdn.jsdelivr.net/gh/Tdahuyou/imgs@main/2025-04-24-21-07-01.png)
- ä¸Šè¿°ç¨‹åºçš„å¤§è‡´æµç¨‹ï¼š
  - å¼•å…¥ `http` æ¨¡å—å¹¶åˆ›å»ºæœåŠ¡å™¨å¯¹è±¡ã€‚
  - æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œè®¾ç½®å“åº”å¤´ `Content-Type` ä¸º `text/plain; charset=utf-8`
    - `Content-Type` è®¾ç½®ä¸ºæ–‡æœ¬ç±»å‹
    - `text/plain` è®¾ç½®ä¸ºçº¯æ–‡æœ¬ç±»å‹
    - `charset=utf-8` è®¾ç½®ä¸º UTF-8 ç¼–ç ï¼Œä»¥é¿å…ä¹±ç ã€‚
  - `res.end('æœåŠ¡å™¨æ­£åœ¨è¿è¡Œä¸­...\n')`
    - å¹¶è¿”å›ä¸­æ–‡æ¶ˆæ¯ "æœåŠ¡å™¨æ­£åœ¨è¿è¡Œä¸­..."ã€‚
    - è¿™é‡Œçš„ `res` å…¶å®å°±æ˜¯ `response` å¯¹è±¡ã€‚
  - æœåŠ¡å™¨ç›‘å¬ç«¯å£ `23523`ï¼Œå¯åŠ¨åè¾“å‡ºç›‘å¬åœ°å€ã€‚
    - `we` çš„ç”Ÿæ—¥æ˜¯ `2023.05.23`
  - å¯åŠ¨å 10 ç§’è‡ªåŠ¨å…³é—­æœåŠ¡å™¨ã€‚
  - å…³é—­æœåŠ¡å™¨åè¾“å‡º "æœåŠ¡å™¨å·²æˆåŠŸå…³é—­"ã€‚
