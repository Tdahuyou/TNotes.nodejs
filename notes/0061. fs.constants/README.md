# [0061. fs.constants](https://github.com/Tdahuyou/TNotes.nodejs/tree/main/notes/0061.%20fs.constants)

<!-- region:toc -->

- [1. ğŸ“’ æ¦‚è¿°](#1--æ¦‚è¿°)
- [2. ğŸ’» demos.1 - æ‰“å° `fs.constants`](#2--demos1---æ‰“å°-fsconstants)
- [3. ğŸ“’ æ–‡ä»¶æ‰“å¼€æ¨¡å¼ (File Open Modes)](#3--æ–‡ä»¶æ‰“å¼€æ¨¡å¼-file-open-modes)
- [4. ğŸ“’ æ–‡ä»¶ç±»å‹ (File Types)](#4--æ–‡ä»¶ç±»å‹-file-types)
- [5. ğŸ“’ æ–‡ä»¶æƒé™ (File Permissions)](#5--æ–‡ä»¶æƒé™-file-permissions)
- [6. ğŸ“’ æƒé™æ£€æŸ¥ (Access Constants)](#6--æƒé™æ£€æŸ¥-access-constants)
- [7. ğŸ“’ å¤åˆ¶æ–‡ä»¶é€‰é¡¹ (Copy File Options)](#7--å¤åˆ¶æ–‡ä»¶é€‰é¡¹-copy-file-options)
- [8. ğŸ“’ ç›®å½•æ¡ç›®ç±»å‹ (Directory Entry Types)](#8--ç›®å½•æ¡ç›®ç±»å‹-directory-entry-types)
- [9. ğŸ“’ ç¬¦å·é“¾æ¥ç±»å‹ (Symbolic Link Types)](#9--ç¬¦å·é“¾æ¥ç±»å‹-symbolic-link-types)

<!-- endregion:toc -->

## 1. ğŸ“’ æ¦‚è¿°

- `fs.constants` æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªå¯¹è±¡ï¼Œæä¾›äº†ä¸€ç»„åº•å±‚å¸¸é‡ï¼Œè¿™äº›å¸¸é‡ä¸æ–‡ä»¶ç³»ç»Ÿæ“ä½œç›¸å…³ï¼Œç”¨äºæ§åˆ¶æ–‡ä»¶ç³»ç»Ÿçš„æ“ä½œè¡Œä¸ºã€‚
- è¿™äº›å¸¸é‡æ¶µç›–äº†æ–‡ä»¶æ‰“å¼€æ¨¡å¼ã€æ–‡ä»¶ç±»å‹ã€æƒé™æ£€æŸ¥ã€åˆ›å»ºç¬¦å·é“¾æ¥ã€å¤åˆ¶é€‰é¡¹ç­‰å¤šä¸ªæ–¹é¢ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„å¸¸é‡æ¥å®ç°ç‰¹å®šçš„åŠŸèƒ½ã€‚
- å®ƒä»¬é€šå¸¸ä½œä¸ºå‚æ•°ä¼ é€’ç»™ `fs` æ¨¡å—ä¸­çš„æ–¹æ³•ï¼ˆå¦‚ `fs.open()`ã€`fs.access()` ç­‰ï¼‰ï¼Œä»¥æ§åˆ¶è¡Œä¸ºæˆ–æŒ‡å®šé€‰é¡¹ã€‚

## 2. ğŸ’» demos.1 - æ‰“å° `fs.constants`

::: code-group

<<< ./demos/1/1.cjs {js}

<<< ./demos/1/1.json {jsonc} [å­—æ®µè§£é‡Šè¯´æ˜]

:::

## 3. ğŸ“’ æ–‡ä»¶æ‰“å¼€æ¨¡å¼ (File Open Modes)

è¿™äº›å¸¸é‡ç”¨äº `fs.open()` æ–¹æ³•ï¼ŒæŒ‡å®šæ–‡ä»¶çš„æ‰“å¼€æ¨¡å¼ã€‚

| **å­—æ®µ** | **å€¼** | **å«ä¹‰** |
| --- | --- | --- |
| `O_RDONLY` | `0` | ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚ |
| `O_WRONLY` | `1` | ä»¥åªå†™æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚ |
| `O_RDWR` | `2` | ä»¥è¯»å†™æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚ |
| `O_CREAT` | `512` | å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–‡ä»¶ã€‚ |
| `O_EXCL` | `2048` | ä¸ `O_CREAT` ä¸€èµ·ä½¿ç”¨ï¼Œç¡®ä¿æ–‡ä»¶æ˜¯æ–°å»ºçš„ï¼ˆå¦‚æœæ–‡ä»¶å·²å­˜åœ¨åˆ™æŠ¥é”™ï¼‰ã€‚ |
| `O_TRUNC` | `1024` | æ‰“å¼€æ–‡ä»¶æ—¶æ¸…ç©ºæ–‡ä»¶å†…å®¹ã€‚ |
| `O_APPEND` | `8` | æ‰“å¼€æ–‡ä»¶æ—¶ï¼Œæ‰€æœ‰å†™å…¥æ“ä½œè¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾ã€‚ |
| `O_NOCTTY` | `131072` | å¦‚æœæ–‡ä»¶æ˜¯ç»ˆç«¯è®¾å¤‡ï¼Œä¸å°†å…¶è®¾ç½®ä¸ºæ§åˆ¶ç»ˆç«¯ã€‚ |
| `O_DIRECTORY` | `1048576` | å¿…é¡»æ˜¯ä¸€ä¸ªç›®å½•ï¼Œå¦åˆ™æŠ¥é”™ã€‚ |
| `O_NOFOLLOW` | `256` | å¦‚æœè·¯å¾„æ˜¯ç¬¦å·é“¾æ¥ï¼Œåˆ™æŠ¥é”™ã€‚ |
| `O_SYNC` | `128` | åŒæ­¥ I/O æ“ä½œï¼Œç¡®ä¿æ•°æ®ç«‹å³å†™å…¥ç£ç›˜ã€‚ |
| `O_DSYNC` | `4194304` | æ•°æ®åŒæ­¥ I/O æ“ä½œï¼ˆä»…åŒæ­¥æ•°æ®éƒ¨åˆ†ï¼‰ã€‚ |
| `O_SYMLINK` | `2097152` | æ‰“å¼€ç¬¦å·é“¾æ¥æœ¬èº«ï¼Œè€Œä¸æ˜¯å…¶æŒ‡å‘çš„ç›®æ ‡æ–‡ä»¶ã€‚ |
| `O_NONBLOCK` | `4` | éé˜»å¡æ¨¡å¼æ‰“å¼€æ–‡ä»¶ã€‚ |

## 4. ğŸ“’ æ–‡ä»¶ç±»å‹ (File Types)

è¿™äº›å¸¸é‡ç”¨äºæ ‡è¯†æ–‡ä»¶çš„ç±»å‹ï¼Œé€šå¸¸ä¸ `fs.stat()` è¿”å›çš„ `mode` å€¼ç»“åˆä½¿ç”¨ã€‚

| **å­—æ®µ**   | **å€¼**  | **å«ä¹‰**                         |
| ---------- | ------- | -------------------------------- |
| `S_IFMT`   | `61440` | ç”¨äºæå–æ–‡ä»¶ç±»å‹çš„éƒ¨åˆ†ï¼ˆæ©ç ï¼‰ã€‚ |
| `S_IFREG`  | `32768` | æ™®é€šæ–‡ä»¶ã€‚                       |
| `S_IFDIR`  | `16384` | ç›®å½•ã€‚                           |
| `S_IFCHR`  | `8192`  | å­—ç¬¦è®¾å¤‡æ–‡ä»¶ã€‚                   |
| `S_IFBLK`  | `24576` | å—è®¾å¤‡æ–‡ä»¶ã€‚                     |
| `S_IFIFO`  | `4096`  | FIFOï¼ˆå‘½åç®¡é“ï¼‰ã€‚               |
| `S_IFLNK`  | `40960` | ç¬¦å·é“¾æ¥ã€‚                       |
| `S_IFSOCK` | `49152` | å¥—æ¥å­—æ–‡ä»¶ã€‚                     |

## 5. ğŸ“’ æ–‡ä»¶æƒé™ (File Permissions)

è¿™äº›å¸¸é‡ç”¨äºè®¾ç½®æˆ–æ£€æŸ¥æ–‡ä»¶çš„æƒé™ã€‚

| **å­—æ®µ**  | **å€¼** | **å«ä¹‰**                                       |
| --------- | ------ | ---------------------------------------------- |
| `S_IRWXU` | `448`  | æ‰€æœ‰è€…æ‹¥æœ‰è¯»ã€å†™å’Œæ‰§è¡Œæƒé™ï¼ˆ`rwx------`ï¼‰ã€‚    |
| `S_IRUSR` | `256`  | æ‰€æœ‰è€…æ‹¥æœ‰è¯»æƒé™ï¼ˆ`r--------`ï¼‰ã€‚              |
| `S_IWUSR` | `128`  | æ‰€æœ‰è€…æ‹¥æœ‰å†™æƒé™ï¼ˆ`-w-------`ï¼‰ã€‚              |
| `S_IXUSR` | `64`   | æ‰€æœ‰è€…æ‹¥æœ‰æ‰§è¡Œæƒé™ï¼ˆ`--x------`ï¼‰ã€‚            |
| `S_IRWXG` | `56`   | æ‰€å±ç»„æ‹¥æœ‰è¯»ã€å†™å’Œæ‰§è¡Œæƒé™ï¼ˆ`---rwx---`ï¼‰ã€‚    |
| `S_IRGRP` | `32`   | æ‰€å±ç»„æ‹¥æœ‰è¯»æƒé™ï¼ˆ`----r----`ï¼‰ã€‚              |
| `S_IWGRP` | `16`   | æ‰€å±ç»„æ‹¥æœ‰å†™æƒé™ï¼ˆ`-----w---`ï¼‰ã€‚              |
| `S_IXGRP` | `8`    | æ‰€å±ç»„æ‹¥æœ‰æ‰§è¡Œæƒé™ï¼ˆ`------x--`ï¼‰ã€‚            |
| `S_IRWXO` | `7`    | å…¶ä»–ç”¨æˆ·æ‹¥æœ‰è¯»ã€å†™å’Œæ‰§è¡Œæƒé™ï¼ˆ`-------rwx`ï¼‰ã€‚ |
| `S_IROTH` | `4`    | å…¶ä»–ç”¨æˆ·æ‹¥æœ‰è¯»æƒé™ï¼ˆ`-------r--`ï¼‰ã€‚           |
| `S_IWOTH` | `2`    | å…¶ä»–ç”¨æˆ·æ‹¥æœ‰å†™æƒé™ï¼ˆ`--------w-`ï¼‰ã€‚           |
| `S_IXOTH` | `1`    | å…¶ä»–ç”¨æˆ·æ‹¥æœ‰æ‰§è¡Œæƒé™ï¼ˆ`---------x`ï¼‰ã€‚         |

## 6. ğŸ“’ æƒé™æ£€æŸ¥ (Access Constants)

è¿™äº›å¸¸é‡ç”¨äº `fs.access()` æ–¹æ³•ï¼Œæ£€æŸ¥æ–‡ä»¶æˆ–ç›®å½•çš„è®¿é—®æƒé™ã€‚

| **å­—æ®µ** | **å€¼** | **å«ä¹‰**                                             |
| -------- | ------ | ---------------------------------------------------- |
| `F_OK`   | `0`    | æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚                                   |
| `R_OK`   | `4`    | æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å¯è¯»ã€‚                                   |
| `W_OK`   | `2`    | æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å¯å†™ã€‚                                   |
| `X_OK`   | `1`    | æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œï¼ˆåœ¨ Windows ä¸Šå§‹ç»ˆè¿”å› `true`ï¼‰ã€‚ |

## 7. ğŸ“’ å¤åˆ¶æ–‡ä»¶é€‰é¡¹ (Copy File Options)

è¿™äº›å¸¸é‡ç”¨äº `fs.copyFile()` æ–¹æ³•ï¼ŒæŒ‡å®šå¤åˆ¶æ–‡ä»¶çš„è¡Œä¸ºã€‚

| **å­—æ®µ** | **å€¼** | **å«ä¹‰** |
| --- | --- | --- |
| `UV_FS_COPYFILE_EXCL` | `1` | å¦‚æœç›®æ ‡æ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™æŠ¥é”™ã€‚ |
| `COPYFILE_EXCL` | `1` | åŒä¸Šï¼ˆ`UV_FS_COPYFILE_EXCL` çš„åˆ«åï¼‰ã€‚ |
| `UV_FS_COPYFILE_FICLONE` | `2` | å°è¯•ä½¿ç”¨â€œå…‹éš†â€æ“ä½œå¤åˆ¶æ–‡ä»¶ï¼ˆå¦‚æœæ”¯æŒï¼‰ã€‚ |
| `COPYFILE_FICLONE` | `2` | åŒä¸Šï¼ˆ`UV_FS_COPYFILE_FICLONE` çš„åˆ«åï¼‰ã€‚ |
| `UV_FS_COPYFILE_FICLONE_FORCE` | `4` | å¼ºåˆ¶ä½¿ç”¨â€œå…‹éš†â€æ“ä½œå¤åˆ¶æ–‡ä»¶ï¼ˆå³ä½¿ä¸æ”¯æŒä¹Ÿä¼šå°è¯•ï¼‰ã€‚ |
| `COPYFILE_FICLONE_FORCE` | `4` | åŒä¸Šï¼ˆ`UV_FS_COPYFILE_FICLONE_FORCE` çš„åˆ«åï¼‰ã€‚ |

## 8. ğŸ“’ ç›®å½•æ¡ç›®ç±»å‹ (Directory Entry Types)

è¿™äº›å¸¸é‡ç”¨äºæ ‡è¯†ç›®å½•æ¡ç›®çš„ç±»å‹ï¼Œé€šå¸¸ä¸ `fs.Dirent` å¯¹è±¡ç»“åˆä½¿ç”¨ã€‚

| **å­—æ®µ**            | **å€¼** | **å«ä¹‰**           |
| ------------------- | ------ | ------------------ |
| `UV_DIRENT_UNKNOWN` | `0`    | æœªçŸ¥ç±»å‹ã€‚         |
| `UV_DIRENT_FILE`    | `1`    | æ™®é€šæ–‡ä»¶ã€‚         |
| `UV_DIRENT_DIR`     | `2`    | ç›®å½•ã€‚             |
| `UV_DIRENT_LINK`    | `3`    | ç¬¦å·é“¾æ¥ã€‚         |
| `UV_DIRENT_FIFO`    | `4`    | FIFOï¼ˆå‘½åç®¡é“ï¼‰ã€‚ |
| `UV_DIRENT_SOCKET`  | `5`    | å¥—æ¥å­—æ–‡ä»¶ã€‚       |
| `UV_DIRENT_CHAR`    | `6`    | å­—ç¬¦è®¾å¤‡æ–‡ä»¶ã€‚     |
| `UV_DIRENT_BLOCK`   | `7`    | å—è®¾å¤‡æ–‡ä»¶ã€‚       |

## 9. ğŸ“’ ç¬¦å·é“¾æ¥ç±»å‹ (Symbolic Link Types)

è¿™äº›å¸¸é‡ç”¨äºåˆ›å»ºç¬¦å·é“¾æ¥æ—¶æŒ‡å®šç±»å‹ã€‚

| **å­—æ®µ**                 | **å€¼** | **å«ä¹‰**                                |
| ------------------------ | ------ | --------------------------------------- |
| `UV_FS_SYMLINK_DIR`      | `1`    | åˆ›å»ºæŒ‡å‘ç›®å½•çš„ç¬¦å·é“¾æ¥ã€‚                |
| `UV_FS_SYMLINK_JUNCTION` | `2`    | åˆ›å»º Windows ä¸Šçš„ç›®å½•è”æ¥ï¼ˆjunctionï¼‰ã€‚ |
